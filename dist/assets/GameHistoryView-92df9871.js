import{M as H,h as I,g as M,a as z}from"./getClickEarn-9987c80d.js";import{d as j,a as R,o as J,r as c,y as A,c as i,f as s,q as B,s as L,i as l,F as h,h as f,b as o,j as N,n as $,x as C,t as d,p as q,A as K,l as O,m as P,_ as Q}from"./index-95e07d1d.js";const G=_=>(O("data-v-565f965f"),_=_(),P(),_),U={class:"game-container"},W={class:"big-container"},X={class:"game-history"},Y={key:0},Z=["onClick"],x={class:"mini-container"},ee={class:"text-container"},se=G(()=>s("span",{class:"bold"},"stake:",-1)),ae=G(()=>s("span",{class:"bold"},"bomb count:",-1)),te={key:1,class:"skeletonHistoryLoader"},oe=G(()=>s("p",null,"loaking for games...",-1)),le=j({__name:"GameHistoryView",setup(_){const{data:w,loading:k,get:D}=R("/api/game-history");J(()=>{D()});const p=c(0),m=A(()=>w.value?w.value.toReversed():void 0),t=A(()=>m.value?m.value[p.value]:void 0),b=c([]),r=c([]),v=c(0),E=c(),T=c();function F(n){p.value!==n&&(p.value=n,b.value=[],v.value=0,r.value=[],clearTimeout(E.value),clearTimeout(T.value),y())}function y(){T.value=setTimeout(()=>{var n,g,e,a;t.value&&((n=t.value)==null?void 0:n.clicks.length)>0&&(b.value.push((g=t.value)==null?void 0:g.clicks[v.value]),v.value+=1,v.value===((e=t.value)==null?void 0:e.clicks.length)?t.value.result==="claimed"?setTimeout(()=>{r.value=t.value.bomb.position},1e3):(r.value.push((a=t.value)==null?void 0:a.clicks[v.value-1].position),setTimeout(()=>{r.value=t.value.bomb.position},1e3)):y())},500)}return y(),(n,g)=>(o(),i("main",null,[s("section",U,[s("div",W,[B(H,{loading:l(k)},{default:L(()=>{var e;return[(o(!0),i(h,null,f((e=t.value)==null?void 0:e.size,a=>(o(),N(z,{key:a,id:a,game:t.value,isBomb:r.value.includes(a),flip:l(I)(a,b.value),earn:l(M)(a,t.value)},null,8,["id","game","isBomb","flip","earn"]))),128))]}),_:1},8,["loading"])])]),s("section",X,[l(k)?(o(),i("div",te,[(o(),i(h,null,f(5,e=>s("div",{class:"game",key:e},[B(K,{height:"100%"}),oe])),64))])):(o(),i("div",Y,[(o(!0),i(h,null,f(m.value,(e,a)=>(o(),i("div",{class:$(["game",{active:a===p.value}]),key:a,onClick:u=>F(a)},[s("div",x,[B(H,{loading:l(k)},{default:L(()=>[(o(!0),i(h,null,f(e==null?void 0:e.size,u=>{var S,V;return o(),N(z,{key:u,id:u,game:e,isBomb:(V=(S=e.bomb)==null?void 0:S.position)==null?void 0:V.includes(u),flip:l(I)(u,e.clicks),earn:l(M)(u,e),"display-icon":!1},null,8,["id","game","isBomb","flip","earn"])}),128))]),_:2},1032,["loading"])]),s("div",ee,[s("h2",null,[C(" Game "+d(m.value.length-a)+" ",1),s("span",{class:$(["highlight",e.result==="claimed"?"win":"lose"])},d(e.result)+" $"+d(l(q)(e.pool)),3)]),s("div",null,[s("p",null,[se,C(" $"+d(l(q)(e.stake)),1)]),s("p",null,[ae,C(" "+d(e.bomb.count),1)])])])],10,Z))),128))]))])]))}});const ue=Q(le,[["__scopeId","data-v-565f965f"]]);export{ue as default};
